<% provide(:title, "Edit #{@user.fullname}") %>
<section>
	<div class="container">
		<div class="pure-g">
			<div class="pure-u-1-1">
				<h1>Edit My Profile</h1>
				<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }, :multipart => true) do |f| %>
				  <%= devise_error_messages! %>
				  <div class="pure-g">
				  	<div class="pure-u-1-1 pure-u-sm-11-24">
				  		<div class="pure-g">
				  			<div class="pure-u-1-1 pure-u-sm-1-2">
						  		<div class="form-group">
						  			<%= f.label :firstname, 'First Name' %>
						  			<%= f.text_field :firstname, { :class => 'form-control' } %>
						  		</div>
				  			</div>
				  			<div class="pure-u-1-1 pure-u-sm-1-2">
						  		<div class="form-group">
						  			<%= f.label :lastname, 'Last Name' %>
						  			<%= f.text_field :lastname, { :class => 'form-control' } %>
						  		</div>
				  			</div>
				  		</div>
				  		<div class="form-group">
				  			<%= f.label :email %>
				  			<%= f.email_field :email, { :class => 'form-control', :autofocus => true } %>
				  		</div>
				  		<% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
				  		<div class="form-group">Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
				  		<% end %>
				  	</div>
						<div class="pure-u-sm-1-12"></div>
						<div class="pure-u-1-1 pure-u-sm-11-24">
				  		<div class="form-group">
						    <%= f.label :street %>
						    <%= f.text_field :street, { :class => 'form-control' } %>
						  </div>
						  <div class="pure-g">
						  	<div class="pure-u-1-1 pure-u-sm-1-2">
								  <div class="form-group">
								    <%= f.label :city %>
								    <%= f.text_field :city, { :class => 'form-control' } %>
								  </div>
								</div>
								<div class="pure-u-1-1 pure-u-sm-1-2">
								  <div class="form-group">
								    <%= f.label :state %>
								    <%= select(:user, 'state', us_states, { :include_blank => 'None' }, { :class => 'form-control' }) %>
								  </div>
								</div>
						  </div>
						</div>
					</div>
					<hr>
					<div class="pure-g">
						<div class="pure-u-1-1 pure-u-sm-11-24">
							<div class="form-group">
								<%= f.label :password %> <i>(leave blank if you don't want to change it)</i>
								<%= f.password_field :password, { :class => 'form-control', :autocomplete => 'off' }  %>
							</div>
							<div class="form-group">
								<%= f.label :password_confirmation %>
								<%= f.password_field :password_confirmation, { :class => 'form-control', :autocomplete => 'off' } %>
							</div>
						</div>
						<div class="pure-u-sm-1-12"></div>
						<div class="pure-u-1-1 pure-u-sm-11-24">
							<div class="form-group">
								<%= f.file_field :avatar %>
							</div>
							<% if current_user.avatar.url.present? %><img class="user-avatar" src="<%= current_user.avatar.url %>"><% end %>
						</div>
					</div>
					<div class="form-group">
						<button type="submit" class="btn btn-success"><%= inline_icon('save', 'Save', 'left')%></button>
					</div>
				<% end %>
				<%= link_to "Back", :back %>
			</div>
		</div>
	</div>
</section>
